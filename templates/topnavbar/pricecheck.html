<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Construction Cost Calculator</title>

  <style>
    :root {
      --accent:#f07a00;
      --muted:#666;
      --card-bg:#fff;
      --bg:#f5f6f7;
      --panel:#ffffff;
      --green:#2b9d3a;
      font-family: Inter, system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    body {
      margin:0;
      background:var(--bg);
      padding:10px;
      color:#150a0a;
    }

    .wrap {
      max-width:1100px;
      margin:0 auto;
    }

    /* Content layout */
    .content {
      display:grid;
      grid-template-columns:1fr 420px;
      gap:18px;
      padding:22px;
    }

    .box {
      background:var(--card-bg);
      padding:18px;
      border-radius:8px;
      border:1px solid #ececec;
    }

    label {
      display:block;
      font-size:13px;
      margin-bottom:8px;
      color:var(--muted);
    }

    select, input[type="number"] {
      width:100%;
      padding:10px 12px;
      font-size:15px;
      border:1px solid #ddd;
      border-radius:6px;
      margin-bottom:12px;
    }

    .btn {
      background:var(--accent);
      color:#fff;
      padding:10px 14px;
      border-radius:6px;
      font-weight:600;
      border:none;
      cursor:pointer;
      width:100%;
    }

    .result {
      margin-top:14px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    .total {
      font-size:22px;
      font-weight:700;
      color:#0b4f78;
    }

    .small {
      font-size:13px;
      color:var(--muted);
    }

    /* Right output panel */
    .output {
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .panel {
      background:#fafafa;
      padding:14px;
      border-radius:8px;
      border:1px solid #eee;
    }

    .panel h3 {
      margin:0 0 8px;
      font-size:15px;
    }

    .stage {
      display:flex;
      justify-content:space-between;
      padding:10px 0;
      border-bottom:1px dashed #ddd;
    }

    .stage:last-child {
      border-bottom:none;
    }

    .items {
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:8px;
      margin-top:10px;
    }

    .item {
      background:#fff;
      border:1px solid #eee;
      padding:8px;
      border-radius:6px;
      display:flex;
      justify-content:space-between;
    }

    footer {
      text-align:center;
      padding:20px;
      font-size:13px;
      color:var(--muted);
    }

    @media (max-width:980px){
      .content {
        grid-template-columns:1fr;
      }
    }
  </style>
</head>

<body>

<header>
 <div class="home-link">
    <a href="/templates/homepage.html">← Back to Home</a>
  </div>
</header>

  <div class="wrap">
    <header>
      <h1 style="text-align:center;">Construction Cost Calculator</h1>
      <p style="text-align:center;">Quick estimate based on per sq.ft rates</p>
    </header>

    <div class="content">

      <!-- Left Box -->
      <div class="box">
        <label>Select Location</label>
        <select id="location">
          <option value="rural" selected>Rural</option>
          <option value="urban">Urban</option>
          <option value="metro">Metro/City</option>
        </select>

        <label>Enter Area (Sqft)</label>
        <input id="area" type="number" min="100" placeholder="Enter area in square feet">

        <button id="calcBtn" class="btn">CALCULATE</button>

        <div class="result">
          <div>
            <div class="small">Total Estimated Expenditure</div>
            <div id="totalDisplay" class="total">—</div>
            <div id="rangeDisplay" class="small"></div>
          </div>

          <div style="text-align:right">
            <div class="small">Estimated cost / sqft</div>
            <div id="perSqft" style="font-size:18px;font-weight:700;">—</div>
          </div>
        </div>

        <p class="small">
          <b>Note:</b> These are approximate values based on typical market rates.
        </p>
      </div>

      <!-- Right Output -->
      <div class="output">

        <div class="panel">
          <h3>Stage Summary</h3>

          <div class="stage">
            <div>Pre-Construction</div>
            <div id="preAmt" style="font-weight:700;">—</div>
          </div>

          <div class="stage">
            <div>Construction</div>
            <div id="consAmt" style="font-weight:700;">—</div>
          </div>

          <div class="stage">
            <div>Finishing</div>
            <div id="finAmt" style="font-weight:700;">—</div>
          </div>

        </div>

        <div class="panel">
          <h3>Breakdown</h3>
          <h4 class="small">Pre-Construction Items</h4>
          <div id="preItems" class="items"></div>

          <h4 class="small" style="margin-top:10px;">Construction Items</h4>
          <div id="consItems" class="items"></div>

          <h4 class="small" style="margin-top:10px;">Finishing Items</h4>
          <div id="finItems" class="items"></div>
        </div>

      </div>

    </div>

    <footer>
      Built for estimate only — Change values in script for your region.
    </footer>
  </div>

<script>
  // Base cost per sqft
  const basePerSqft = {
    rural: 1200,
    urban: 1500,
    metro: 1800
  };

  // Stage percentage distribution
  const stageShares = {
    pre: 0.07,
    cons: 0.70,
    fin: 0.23
  };

  // Category weights
  const preWeights = { designFees:0.6, borewell:0.4 };
  const consWeights = {
    marking:0.03, sand:0.06, cement:0.13, bricks:0.09,
    stoneAggregates:0.05, concreteContractor:0.12, steel:0.07,
    electricalWork:0.06, plumbingSanitation:0.08, formwork:0.06,
    compoundWall:0.03, water:0.02
  };
  const finWeights = {
    flooring:0.30, paint:0.22, doorsWindows:0.18,
    sanitaryware:0.16, misc:0.14
  };

  function normalize(obj){
    let sum = Object.values(obj).reduce((a,b)=>a+b,0);
    let o = {};
    for(let k in obj){ o[k] = obj[k]/sum; }
    return o;
  }

  function formatINR(value){
    return "₹ " + value.toLocaleString("en-IN");
  }

  function renderItems(id, data){
    const box = document.getElementById(id);
    box.innerHTML = "";
    for(let k in data){
      let div = document.createElement("div");
      div.className = "item";

      let name = k.replace(/([A-Z])/g," $1").replace(/^./, (s) => s.toUpperCase());
      div.innerHTML = `<span>${name}</span><span>${formatINR(data[k])}</span>`;
      box.appendChild(div);
    }
  }

  document.getElementById("calcBtn").onclick = function(){
    let loc = document.getElementById("location").value;
    let area = Number(document.getElementById("area").value);

    if(!area || area <= 0){
      alert("Please enter valid area");
      return;
    }

    let per = basePerSqft[loc];
    let total = per * area;

    document.getElementById("perSqft").textContent = formatINR(per);
    document.getElementById("totalDisplay").textContent = formatINR(total);
    document.getElementById("rangeDisplay").textContent =
      `${formatINR(total * 0.96)} - ${formatINR(total * 1.04)}`;

    let pre = total * stageShares.pre;
    let cons = total * stageShares.cons;
    let fin = total * stageShares.fin;

    document.getElementById("preAmt").textContent = formatINR(pre);
    document.getElementById("consAmt").textContent = formatINR(cons);
    document.getElementById("finAmt").textContent = formatINR(fin);

    // Breakdown
    const preN = normalize(preWeights);
    const consN = normalize(consWeights);
    const finN = normalize(finWeights);

    let p = {}, c = {}, f = {};
    for(let k in preN) p[k] = Math.round(pre * preN[k]);
    for(let k in consN) c[k] = Math.round(cons * consN[k]);
    for(let k in finN) f[k] = Math.round(fin * finN[k]);

    renderItems("preItems", p);
    renderItems("consItems", c);
    renderItems("finItems", f);
  };
</script>

</body>
</html>
