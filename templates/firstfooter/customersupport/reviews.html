<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>OneBuild – Live Feedback</title>

<style>
    :root{
        --accent:#1a73e8;
        --muted:#6b7280;
        font-family: Inter, system-ui, sans-serif;
    }
    body{
        background:#f4f6fb;
        margin:0;
        padding:0;
    }

    /* ---------------- NAVBAR ---------------- */
    .navbar{
        background:#fff;
        padding:12px 20px;
        display:flex;
        justify-content:space-between;
        align-items:center;
        box-shadow:0 3px 12px rgba(0,0,0,0.1);
        position:sticky;
        top:0;
        z-index:999;
    }
    .nav-left{
        display:flex;
        align-items:center;
        font-size:22px;
        font-weight:800;
        color:var(--accent);
    }
    .nav-left img{
        height:40px;
        margin-right:8px;
    }
    .nav-links a{
        margin:0 12px;
        text-decoration:none;
        font-weight:600;
        color:#111;
    }
    .dropdown{
        position:relative;
        display:inline-block;
    }
    .dropdown-btn{
        cursor:pointer;
        font-weight:600;
    }
    .dropdown-content{
        display:none;
        position:absolute;
        background:white;
        min-width:160px;
        box-shadow:0 4px 12px rgba(0,0,0,0.15);
        border-radius:8px;
        padding:10px 0;
        z-index:999;
    }
    .dropdown:hover .dropdown-content{
        display:block;
    }
    .dropdown-content a{
        padding:10px 14px;
        display:block;
        text-decoration:none;
        color:#111;
    }
    .dropdown-content a:hover{
        background:#f3f3f3;
    }

    /* ---------------- PAGE ---------------- */
    .container{
        max-width:800px;
        margin:auto;
        padding:20px;
    }
    h1{
        text-align:center;
        font-size:26px;
        text-decoration:underline;
    }
    .card{
        background:white;
        padding:18px;
        border-radius:12px;
        box-shadow:0 4px 14px rgba(0,0,0,0.1);
        margin-top:20px;
    }
    label{
        font-weight:600;
        margin-top:12px;
        display:block;
    }
    input, textarea, select{
        width:100%;
        padding:10px;
        margin-top:8px;
        border-radius:8px;
        border:1px solid #d1d5db;
    }
    button{
        background:var(--accent);
        border:none;
        color:white;
        padding:12px 20px;
        font-size:16px;
        border-radius:10px;
        margin-top:14px;
        cursor:pointer;
        font-weight:700;
    }
    .review{
        background:white;
        padding:14px;
        margin-top:12px;
        border-radius:10px;
        border:1px solid rgba(0,0,0,0.05);
    }
    .stars{
        color:#f59e0b;
        font-weight:700;
        margin-bottom:5px;
    }
    .meta{
        color:var(--muted);
        font-size:12px;
        margin-bottom:6px;
    }
</style>
</head>
<body>

<!-- ================ NAVBAR ================== -->
<div class="navbar">
    <div class="nav-left">
        <img src="/images/homepages/onebuild.png" alt="OneBuild logo">
    </div>
    <div class="nav-links">
        <a href="/templates/homepageindex.html">Home</a>
        <a href="/templates/footer/about.html">About</a>
        <a href="/templates/footer/contact.html">Contact</a>

        <div class="dropdown">
        <span class="dropdown-btn">Shop Categories ▼</span>
        <div class="dropdown-content">
        <a href="/templates/categories/aggregates/index.html">Aggregates</a>
        <a href="/templates/categories/bricks_blocks/index.html">Bricks & Blocks</a>
        <a href="/templates/categories/cement/index.html">Cement</a>
        <a href="/templates/categories/sand/index.html">Sand</a>
        <a href="/templates/categories/tmt/index.html">TMT Bars</a>
        <a href="/templates/categories/roofing/index.html">Roofing</a>
        <a href="/templates/categories/door_windows/index.html">Windows & Doors</a>
        <a href="/templates/categories/plumbling/index.html">Plumbing</a>
        <a href="/templates/categories/electrics/index.html">Electrical</a>
        <a href="/templates/categories/paints/index.html">Paints</a>
        <a href="/templates/categories/flooring/index.html">Flooring</a>
        <a href="/templates/categories/Interiordesigns/index.html">Interior Designs</a>
        <a href="/templates/categories/glass_glazing/index.html">Glass & Glazing</a>
        <a href="/templates/categories/insulation/index.html">Insulation</a>
        <a href="/templates/categories/Sanitaryware/index.html">Sanitaryware</a>
        </div>
        </div>
    </div>
</div>

<!-- ===================== BODY ===================== -->
<div class="container">
    <h1>Live Customer Feedback</h1>

    <!-- FEEDBACK FORM -->
    <div class="card">
        <h3>Write Your Feedback</h3>

        <label>Your Name</label>
        <input id="name" placeholder="Enter your full name">

        <label>Rating</label>
        <select id="rating">
            <option value="5">⭐⭐⭐⭐⭐ (5)</option>
            <option value="4">⭐⭐⭐⭐ (4)</option>
            <option value="3">⭐⭐⭐ (3)</option>
            <option value="2">⭐⭐ (2)</option>
            <option value="1">⭐ (1)</option>
        </select>

        <label>Your Feedback</label>
        <textarea id="message" placeholder="Write something..." rows="4"></textarea>

        <label>Contact (optional)</label>
        <input id="contact" placeholder="Email / Mobile (optional)">

        <button onclick="submitFeedback()">Submit</button>
    </div>

    <h3 style="margin-top:25px;">Recent Feedback</h3>
    <div id="feedbackList"></div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
// ---------- FIREBASE CONFIG (Replace with your keys) ----------
const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    databaseURL: "https://YOUR_DATABASE_URL.firebaseio.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_BUCKET.appspot.com",
    messagingSenderId: "YOUR_MSG_ID",
    appId: "YOUR_APP_ID"
};

// INIT FIREBASE
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// SUBMIT FEEDBACK
function submitFeedback(){
    let name = document.getElementById("name").value.trim();
    let rating = document.getElementById("rating").value;
    let message = document.getElementById("message").value.trim();
    let contact = document.getElementById("contact").value.trim();

    if(name === "" || message === ""){
        alert("Please fill name and feedback!");
        return;
    }

    let data = {
        name,
        rating,
        message,
        contact,
        date: new Date().toLocaleString()
    };

    db.ref("feedbacks").push(data)
    .then(()=>{
        alert("Feedback Submitted!");
        document.getElementById("name").value = "";
        document.getElementById("message").value = "";
        document.getElementById("contact").value = "";
    });
}

// LIVE DISPLAY
db.ref("feedbacks").on("value", function(snapshot){
    let container = document.getElementById("feedbackList");
    container.innerHTML = "";

    snapshot.forEach(data=>{
        let r = data.val();
        let div = document.createElement("div");
        div.className = "review";

        div.innerHTML = `
            <div class='stars'>${"★".repeat(r.rating)}</div>
            <div class='meta'>${r.name} • ${r.date}</div>
            <div>${r.message}</div>
        `;

        container.prepend(div);
    });
});
</script>

</body>
</html>
